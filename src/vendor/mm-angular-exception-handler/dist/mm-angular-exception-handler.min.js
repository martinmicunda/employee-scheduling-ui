/**
 * An angular module that override default $exceptionHandler service.
 * @version v0.0.1 - 2014-07-23
 * @link https://github.com/martinmicunda/mm-angular-exception-handler
 * @author Martin Micunda
 * @copyright 2014(c) Martin Micunda
 * @license MIT, https://github.com/martinmicunda/mm-angular-exception-handler/blob/master/LICENSE
 */
!function(){"use strict";function n(){var n={appErrorPrefix:"",ravenDns:null,ravenConfig:null,customDns:null};this.setConfigAppErrorPrefix=function(e){n.appErrorPrefix=e||n.appErrorPrefix},this.setConfigRavenDns=function(e){if(!e)throw new Error("RavenDNS must be set!");n.ravenDns=e},this.setConfigRavenConfig=function(e){n.ravenConfig=e||n.ravenConfig},this.setConfigCustomDns=function(e){if(!e)throw new Error("CustomeDNS must be set!");n.customDns=e},this.$get=["Logger","$window","$injector",function(e,r,o){var t=e.getLogger("$exceptionHandler"),i={navigatorAppName:navigator.appName,navigatorUserAgent:navigator.userAgent};if(r.Raven){t.info("Using the RavenJS server-side logging exception handler."),t.info("RavenJS ravenDns {0}",[n.ravenDns]),t.info("RavenJS ravenConfig {0}",[n.ravenConfig]);try{Raven.config(n.ravenDns,n.ravenConfig).install()}catch(a){t.error("Error to configure RavenJS"),t.error(a.toString())}}else n.customDns&&(t.info("Using the custom server-side logging exception handler."),t.info("Custom DNS {0}",[n.customDns]));return function(e,a){var s={exception:e,cause:a},g=n.appErrorPrefix?n.appErrorPrefix+" - "+e.message:e.message;try{if(r.Raven)Raven.captureException(e,{extra:{cause:a,browserInfo:i}});else if(n.customDns){var c=e?e.toString():"",f=e&&e.stack?e.stack.toString():"",u=o.get("$httpBackend");u("POST",n.customDns,angular.toJson({url:r.location.href,message:c,stackTrace:f,cause:a||"",browserInfo:i}),angular.noop,{"content-type":"application/json"})}}catch(v){t.error("Error server-side logging failed"),t.error(v.toString())}t.error(g,null,s)}}]}angular.module("mm.exceptionHandler",["mm.logger"]).provider("$exceptionHandler",n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW0tYW5ndWxhci1leGNlcHRpb24taGFuZGxlci5qcyIsInNvdXJjZXMiOlsibW0tYW5ndWxhci1leGNlcHRpb24taGFuZGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQ0FDQSxXQUNBLFlBc0RBLFNBQUEsS0FTQSxHQUFBLElBQ0EsZUFBQSxHQUNBLFNBQUEsS0FDQSxZQUFBLEtBQ0EsVUFBQSxLQVdBLE1BQUEsd0JBQUEsU0FBQSxHQUNBLEVBQUEsZUFBQSxHQUFBLEVBQUEsZ0JBV0EsS0FBQSxrQkFBQSxTQUFBLEdBQ0EsSUFBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLHdCQUVBLEdBQUEsU0FBQSxHQVdBLEtBQUEscUJBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxHQUFBLEVBQUEsYUFXQSxLQUFBLG1CQUFBLFNBQUEsR0FDQSxJQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMEJBRUEsR0FBQSxVQUFBLEdBR0EsS0FBQSxNQUFBLFNBQUEsVUFBQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFBQSxxQkFDQSxHQUNBLGlCQUFBLFVBQUEsUUFDQSxtQkFBQSxVQUFBLFVBRUEsSUFBQSxFQUFBLE1BQUEsQ0FDQSxFQUFBLEtBQUEsNERBQ0EsRUFBQSxLQUFBLHdCQUFBLEVBQUEsV0FDQSxFQUFBLEtBQUEsMkJBQUEsRUFBQSxhQUNBLEtBRUEsTUFBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLGFBQUEsVUFDQSxNQUFBLEdBQ0EsRUFBQSxNQUFBLDhCQUNBLEVBQUEsTUFBQSxFQUFBLGlCQUVBLEdBQUEsWUFDQSxFQUFBLEtBQUEsMkRBQ0EsRUFBQSxLQUFBLGtCQUFBLEVBQUEsWUFFQSxPQUFBLFVBQUEsRUFBQSxHQUNBLEdBQUEsSUFBQSxVQUFBLEVBQUEsTUFBQSxHQUNBLEVBQUEsRUFBQSxlQUFBLEVBQUEsZUFBQSxNQUFBLEVBQUEsUUFBQSxFQUFBLE9BRUEsS0FDQSxHQUFBLEVBQUEsTUFFQSxNQUFBLGlCQUFBLEdBQUEsT0FBQSxNQUFBLEVBQUEsWUFBQSxTQUNBLElBQUEsRUFBQSxVQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxXQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsV0FBQSxHQUdBLEVBQUEsRUFBQSxJQUFBLGVBR0EsR0FBQSxPQUFBLEVBQUEsVUFBQSxRQUFBLFFBQ0EsSUFBQSxFQUFBLFNBQUEsS0FDQSxRQUFBLEVBQ0EsV0FBQSxFQUNBLE1BQUEsR0FBQSxHQUNBLFlBQUEsSUFDQSxRQUFBLE1BQUEsZUFBQSxzQkFFQSxNQUFBLEdBQ0EsRUFBQSxNQUFBLG9DQUNBLEVBQUEsTUFBQSxFQUFBLFlBR0EsRUFBQSxNQUFBLEVBQUEsS0FBQSxNQUtBLFFBQ0EsT0FBQSx1QkFBQSxjQUNBLFNBQUEsb0JBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgUmF2ZW46dHJ1ZSAqL1xuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtb2R1bGVcbiAgICAgKiBAbmFtZSBtbS5leGNlcHRpb25IYW5kbGVyXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBUaGUgYG1tLmV4Y2VwdGlvbkhhbmRsZXJgIG1vZHVsZSBvdmVycmlkZSBBbmd1bGFyJ3MgZGVmYXVsdCB7QGxpbmsgaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJGV4Y2VwdGlvbkhhbmRsZXIgYCRleGNlcHRpb25IYW5kbGVyYH0sIGl0XG4gICAgICogcHJlc2VydmVzIHRoZSBkZWZhdWx0IGJlaGF2aW91ciAobG9nZ2luZyB0byB0aGUgY29uc29sZSBieSB7QGxpbmsgYG1tLkxvZ2dlcmApIGJ1dCBhbHNvIHBvc3RzIHRoZSBlcnJvciB0byB7QGxpbmsgaHR0cHM6Ly9nZXRzZW50cnkuY29tLyBgU2VudHJ5YClcbiAgICAgKiBvciBzb21lIGN1c3RvbSByZXBvcnRpbmcgdG9vbC5cbiAgICAgKlxuICAgICAqICMgVXNhZ2VcbiAgICAgKiBTZWUge0BsaW5rIG1tLmV4Y2VwdGlvbkhhbmRsZXIuJGV4Y2VwdGlvbkhhbmRsZXIjdXNhZ2UgYCRleGNlcHRpb25IYW5kbGVyYH0gZm9yIGFuIGV4YW1wbGUgb2YgY29uZmlndXJpbmcgYW5kIHVzaW5nIGAkZXhjZXB0aW9uSGFuZGxlcmAuXG4gICAgICpcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBwcm92aWRlclxuICAgICAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXJcbiAgICAgKiBAbW9kdWxlIG1tLmV4Y2VwdGlvbkhhbmRsZXJcbiAgICAgKiBAcmVxdWlyZXMgbmcuJHdpbmRvd1xuICAgICAqIEByZXF1aXJlcyBuZy4kaW5qZWN0b3JcbiAgICAgKiBAcmVxdWlyZXMgbW0uTG9nZ2VyXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBVc2UgdGhlIGAkZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyYCB0byBjb25maWd1cmUgd2hlcmUgdG8gcG9zdCBlcnJvcnMuICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXIgY2FuIHBvc3RzIGVycm9yIHRvIGBTZW50cnlgIG9yIHNvbWUgY3VzdG9tIHJlcG9ydGluZyB0b29sXG4gICAgICogc2VlIHVzYWdlIGJlbG93LlxuICAgICAqXG4gICAgICogQHVzYWdlXG4gICAgICogQnkgZGVmYXVsdCBwb3N0aW5nIGVycm9yIHRvIHJlcG9ydGluZyB0b29sIGlzIHR1cm4gb2ZmLiBUaGlzIGNhbiBiZSB0dXJuIG9uIGJ5IGNvbmZpZ3VyaW5nIHRoZSBgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcmAgbGlrZSB0aGlzIChjdXN0b20gcmVwb3J0aW5nIHRvb2wpOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21FeGNlcHRpb25IYW5kbGVyRGVtbycsIFtdKS5jb25maWcoWyckZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyJywgZnVuY3Rpb24gKGNmZykge1xuICAgICAqICAgICAgY2ZnLnNldENvbmZpZ0FwcEVycm9yUHJlZml4KCdkZW1vQXBwJyk7XG4gICAgICogICAgICBjZmcuc2V0Q29uZmlnQ3VzdG9tRG5zKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvZXJyb3InKTtcbiAgICAgKiAgIH1dKTtcbiAgICAgKiBgYGBcbiAgICAgKiA+ICoqTm90ZToqKiBZb3UgbmVlZCB0byBwcm92aWRlIHlvdXIgb3duIGJhY2sgZW5kIGltcGxlbWVudGF0aW9uIHRoYXQgYWNjZXB0IGBwb3N0YCBqc29uIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBvciBwb3N0IGVycm9yIHRvIGBTZW50cnlgIGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8c2NyaXB0IHNyYz1cIi8vY2RuLnJhdmVuanMuY29tLzEuMS4xNS9yYXZlbi5taW4uanNcIj48L3NjcmlwdD5cbiAgICAgKiBgYGBcbiAgICAgKiBgYGBqc1xuICAgICAqICAgYW5ndWxhci5tb2R1bGUoJ3NlbnRyeUV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlckRlbW8nLCBbXSkuY29uZmlnKFsnJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcicsIGZ1bmN0aW9uIChjZmcpIHtcbiAgICAgKiAgICAgIHZhciByYXZlbkNvbmZpZyA9IHtsb2dnZXI6ICdqYXZhc2NyaXB0J307XG4gICAgICogICAgICBjZmcuc2V0Q29uZmlnQXBwRXJyb3JQcmVmaXgoJ2RlbW9BcHAnKTtcbiAgICAgKiAgICAgIGNmZy5zZXRDb25maWdSYXZlbkRucygnJ2h0dHBzOi8vN2JlLi4uLi4uLi4uLi4uLi4uNDkxQGFwcC5nZXRzZW50cnkuY29tLzIuLi4yJyk7XG4gICAgICogICAgICBjZmcuc2V0Q29uZmlnUmF2ZW5Db25maWcocmF2ZW5Db25maWcpO1xuICAgICAqICAgfV0pO1xuICAgICAqIGBgYFxuICAgICAqID4gKipOb3RlOioqIFlvdSBuZWVkIHRvIGNyZWF0ZSBTZW50cnkgYWNjb3VudCB0byBiZSBhYmxlIHRvIHNlbmQgZXJyb3IgZGF0YSB0byB7QGxpbmsgaHR0cHM6Ly9nZXRzZW50cnkuY29tLyBgU2VudHJ5YCkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBFeGNlcHRpb24gaGFuZGxlciBjb25maWd1cmF0aW9uLiBhcHBFcnJvclByZWZpeCBpcyBvcHRpb25hbCB0eXBlLiBJZiB5b3Ugd2FudCB0byB1c2UgZXJyb3IgcmVwb3J0aW5nIHRvb2wgdGhlbiBhdFxuICAgICAgICAgKiBsZWFzdCBvbmUgb2YgdGhlIGByYXZlbkRuc2Agb3IgYGN1c3RvbURuc2AgaGFzIHRvIGJlIGRlZmluZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHt7YXBwRXJyb3JQcmVmaXg6IHN0cmluZywgcmF2ZW5EbnM6IG51bGwsIHJhdmVuQ29uZmlnOiBudWxsLCBjdXN0b21EbnM6IG51bGx9fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwcEVycm9yUHJlZml4OiAnJywgLy8gb3B0aW9uYWxcbiAgICAgICAgICAgIHJhdmVuRG5zOiBudWxsLFxuICAgICAgICAgICAgcmF2ZW5Db25maWc6IG51bGwsIC8vIG9wdGlvbmFsXG4gICAgICAgICAgICBjdXN0b21EbnM6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciNzZXRDb25maWdBcHBFcnJvclByZWZpeFxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogU2V0IGFwcCBlcnJvciBwcmVmaXguXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gX2FwcEVycm9yUHJlZml4IC0gYW4gb3B0aW9uYWwgYXBwIGVycm9yIHByZWZpeFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZXRDb25maWdBcHBFcnJvclByZWZpeCA9IGZ1bmN0aW9uKF9hcHBFcnJvclByZWZpeCkge1xuICAgICAgICAgICAgY29uZmlnLmFwcEVycm9yUHJlZml4ID0gX2FwcEVycm9yUHJlZml4IHx8IGNvbmZpZy5hcHBFcnJvclByZWZpeDtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciNzZXRDb25maWdBcHBFcnJvclByZWZpeFxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogU2V0IHRoZSByYXZlbiBETlMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfcmF2ZW5EbnMgLSBhbiB2YWxpZCByYXZlbiBETlNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2V0Q29uZmlnUmF2ZW5EbnMgPSBmdW5jdGlvbihfcmF2ZW5EbnMpIHtcbiAgICAgICAgICAgIGlmICghX3JhdmVuRG5zKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYXZlbkROUyBtdXN0IGJlIHNldCEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpZy5yYXZlbkRucyA9IF9yYXZlbkRucztcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciNzZXRDb25maWdSYXZlbkNvbmZpZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogU2V0IHRoZSByYXZlbiBjb25maWcgb3B0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmdbXT19IF9yYXZlbkNvbmZpZyAtIGFuIG9wdGlvbmFsIGFycmF5IG9mIHJhdmVuIGNvbmZpZyBvcHRpb25zXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldENvbmZpZ1JhdmVuQ29uZmlnID0gZnVuY3Rpb24oX3JhdmVuQ29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcucmF2ZW5Db25maWcgPSBfcmF2ZW5Db25maWcgfHwgY29uZmlnLnJhdmVuQ29uZmlnO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyI3NldENvbmZpZ0N1c3RvbURuc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogU2V0IHRoZSBjdXN0b20gZG5zLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2N1c3RvbURucyAtIGFuIHZhbGlkIGN1c3RvbSBETlNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2V0Q29uZmlnQ3VzdG9tRG5zID0gZnVuY3Rpb24oX2N1c3RvbURucykge1xuICAgICAgICAgICAgaWYgKCFfY3VzdG9tRG5zKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDdXN0b21lRE5TIG11c3QgYmUgc2V0IScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnLmN1c3RvbURucyA9IF9jdXN0b21EbnM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4kZ2V0ID0gWydMb2dnZXInLCAnJHdpbmRvdycsICckaW5qZWN0b3InLCBmdW5jdGlvbiAoTG9nZ2VyLCAkd2luZG93LCAkaW5qZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBsb2dnZXIgPSBMb2dnZXIuZ2V0TG9nZ2VyKCckZXhjZXB0aW9uSGFuZGxlcicpO1xuICAgICAgICAgICAgdmFyIGJyb3dzZXJJbmZvID0ge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvckFwcE5hbWUgOiBuYXZpZ2F0b3IuYXBwTmFtZSxcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3JVc2VyQWdlbnQgOiBuYXZpZ2F0b3IudXNlckFnZW50XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCR3aW5kb3cuUmF2ZW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygnVXNpbmcgdGhlIFJhdmVuSlMgc2VydmVyLXNpZGUgbG9nZ2luZyBleGNlcHRpb24gaGFuZGxlci4nKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygnUmF2ZW5KUyByYXZlbkRucyB7MH0nLCBbY29uZmlnLnJhdmVuRG5zXSk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1JhdmVuSlMgcmF2ZW5Db25maWcgezB9JywgW2NvbmZpZy5yYXZlbkNvbmZpZ10pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyZSBSYXZlblxuICAgICAgICAgICAgICAgICAgICBSYXZlbi5jb25maWcoY29uZmlnLnJhdmVuRG5zLCBjb25maWcucmF2ZW5Db25maWcpLmluc3RhbGwoKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChsb2dnaW5nRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciB0byBjb25maWd1cmUgUmF2ZW5KUycpO1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IobG9nZ2luZ0Vycm9yLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZihjb25maWcuY3VzdG9tRG5zKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1VzaW5nIHRoZSBjdXN0b20gc2VydmVyLXNpZGUgbG9nZ2luZyBleGNlcHRpb24gaGFuZGxlci4nKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygnQ3VzdG9tIEROUyB7MH0nLCBbY29uZmlnLmN1c3RvbURuc10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChleGNlcHRpb24sIGNhdXNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yRGF0YSA9IHsgZXhjZXB0aW9uOiBleGNlcHRpb24sIGNhdXNlOiBjYXVzZSB9O1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gY29uZmlnLmFwcEVycm9yUHJlZml4ID8gY29uZmlnLmFwcEVycm9yUHJlZml4ICsgJyAtICcgKyBleGNlcHRpb24ubWVzc2FnZSA6IGV4Y2VwdGlvbi5tZXNzYWdlO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR3aW5kb3cuUmF2ZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc3QgZXJyb3IgdG8gU2VudHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICBSYXZlbi5jYXB0dXJlRXhjZXB0aW9uKGV4Y2VwdGlvbiwge2V4dHJhOiB7Y2F1c2U6IGNhdXNlLCBicm93c2VySW5mbzogYnJvd3NlckluZm99fSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihjb25maWcuY3VzdG9tRG5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXhjZXB0aW9uID8gZXhjZXB0aW9uLnRvU3RyaW5nKCkgOiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFja1RyYWNlID0gZXhjZXB0aW9uID8gKGV4Y2VwdGlvbi5zdGFjayA/IGV4Y2VwdGlvbi5zdGFjay50b1N0cmluZygpIDogJycpIDogJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzaW5nIHRoZSAkaW5qZWN0b3Igc2VydmljZSBkaXJlY3RseSB0byBhdm9pZCBhIGNpcmN1bGFyIGRlcGVuZGVuY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaHR0cEJhY2tlbmQgPSAkaW5qZWN0b3IuZ2V0KCckaHR0cEJhY2tlbmQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnlwYXNzaW5nIGFuZ3VsYXIncyBodHRwIGFic3RyYWN0aW9uIHRvIGF2b2lkIGluZmluaXRlIGV4Y2VwdGlvbiBsb29wc1xuICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHBCYWNrZW5kKCdQT1NUJywgY29uZmlnLmN1c3RvbURucywgYW5ndWxhci50b0pzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja1RyYWNlOiBzdGFja1RyYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlOiAoIGNhdXNlIHx8ICcnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VySW5mbzogYnJvd3NlckluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBhbmd1bGFyLm5vb3AsIHsgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGxvZ2dpbmdFcnJvcil7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2VydmVyLXNpZGUgbG9nZ2luZyBmYWlsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGxvZ2dpbmdFcnJvci50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbG9nIHRoZSBlcnJvciB0byBjb25zb2xlXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG1lc3NhZ2UsIG51bGwsIGVycm9yRGF0YSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ21tLmV4Y2VwdGlvbkhhbmRsZXInLCBbJ21tLmxvZ2dlciddKVxuICAgICAgICAucHJvdmlkZXIoJyRleGNlcHRpb25IYW5kbGVyJywgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcik7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9